{{#paper-dialog class="flex-77 file-dialog" onClose=(action "closeDialog" "cancel") origin=dialogOrigin}}
  <form>
    {{#paper-toolbar}}
      {{#paper-toolbar-tools}}
        <h2>
          {{#each currentDirectory as |path index|}}


            {{#if (not (eq path currentDirectory.lastObject))}}
              <button class="darker transition" {{action "getFilesFromFragment" index}}>{{path}}</button>
            {{else}}
              <span class="transition">{{path}}</span>
            {{/if}}
          {{/each}}
        </h2>
        <span class="flex"></span>
        {{md-search value=(mut search)}}

        {{#paper-menu as |menu|}}
          {{#menu.trigger}}
            {{#paper-button iconButton=true}}
              {{paper-icon "view-module" size=24}}
            {{/paper-button}}
          {{/menu.trigger}}

          {{#menu.content width=4 as |content|}}
            {{#content.menu-item onClick=(action "view" "grid")}}
              {{paper-icon "view-module"}}
              <span>View As Grid</span>
            {{/content.menu-item}}

            {{#content.menu-item onClick=(action "view" "list")}}
              {{paper-icon "view-list"}}
              <span>View As List</span>
            {{/content.menu-item}}

            {{#content.menu-item onClick=(action "view" "column")}}
              {{paper-icon "view-column"}}
              <span>View In Columns</span>
            {{/content.menu-item}}
          {{/menu.content}}
        {{/paper-menu}}
        {{#paper-button iconButton=true onClick=(action "closeDialog" "cancel")}}{{paper-icon icon="sort-by-alpha"}}{{/paper-button}}
      {{/paper-toolbar-tools}}
    {{/paper-toolbar}}

    {{#paper-dialog-content}}
      <div class="layout-row flex">
        {{!--
          This is the left element that shows the folders in the current directory
        --}}
        <div class="flex">
          {{#paper-list}}
            {{#paper-subheader}}Folders{{/paper-subheader}}
            {{#each directories as |directory|}}
              {{#paper-item onClick=(action "getFiles" directory.fileName)}}
                {{paper-icon "folder"}}
                <span>{{directory.fileName}}</span>
              {{/paper-item}}
            {{/each}}
          {{/paper-list}}
        </div>

        {{!--
          This is the right element that shows the files in the current directory
        --}}
        <div class="flex file-content">
        {{#if (eq viewType "grid")}}
            {{#if (not filteredFiles)}}
              <div class="information">
                <h1>This Folder Is Empty</h1>
              </div>
            {{/if}}
            {{#each filteredFiles as |file|}}
                <div class="icon">
                  <div>
                    {{paper-icon "insert-drive-file" size=48}}
                    <span>{{file.fileName}}</span>
                  </div>
                </div>
            {{/each}}
        {{/if}}
        {{#if (eq viewType "list")}}
          {{md-file-table files=filteredFiles}}
        {{/if}}
        </div>

      </div>
    {{/paper-dialog-content}}

    {{#paper-dialog-actions class="layout-row"}}
      <span class="flex"></span>
      {{#paper-button onClick=(action "closeDialog" "cancel")}}Cancel{{/paper-button}}
      {{#paper-button onClick=(action "closeDialog" "ok")}}OK{{/paper-button}}
    {{/paper-dialog-actions}}
  </form>
{{/paper-dialog}}
